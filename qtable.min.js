(function(d,c,b){var a={},e={search:true,sort:true,pagination:{rows:[10,20,50,100],pages:5}};a.header=function(f){};a.body=function(l,g){g=g||[];d("tbody",l).html("");for(var h=0;h<g.length;h++){var k="<tr>";for(var f=0;f<g[h].length;f++){k+="<td>"+g[h][f]+"</td>"}k+="</tr>";d("tbody",l).append(k)}};a.tableData=function(f){var g=[];d("tbody",f).find("tr").each(function(){var h=[];d(this).find("td,th").each(function(){h.push(d(this).html())});g.push(h)});return g};a.footer=function(){};a.footerControls=function(m,i,j,k){k=k||5;var h=d('<div class="qtable-fc"><div class="qtable-pd"></div><ul class="qtable-pagination"></ul></div>'),g=[],o=0,l=Math.ceil(k/2),f=0;j=j>i?i:(j<=0?1:j);if(i<=k||j<=l){k=i>k?k:i;for(f=1;f<=k;f++){g.push(f)}}else{if(j>=(i-(l-1))){for(f=i;f>=(i-k);f--){g.push(f)}g.reverse()}else{o=j-(l-1);for(f=0;f<k;f++){g.push(o+f)}}}h.find(".qtable-pd").html("Page <b>"+j+"</b> of <b>"+i+"</b>");h.find(".qtable-pagination").append("<li "+(1==g[0]?'class="hidden"':"")+'><a data-pg="1">|<</a></li>');h.find(".qtable-pagination").append("<li "+(1==g[0]?'class="hidden"':"")+'><a data-pg="'+(j-1)+'"><</a></li>');for(f=0;f<g.length;f++){var n=g[f]==j?'class="active"':"";h.find(".qtable-pagination").append("<li "+n+'><a data-pg="'+g[f]+'">'+g[f]+"</a></li>")}h.find(".qtable-pagination").append("<li "+(i==g[(g.length-1)]?'class="hidden"':"")+'><a data-pg="'+(j+1)+'">></a></li>');h.find(".qtable-pagination").append("<li "+(i==g[(g.length-1)]?'class="hidden"':"")+'><a data-pg="'+i+'">>|</a></li>');m.find(".qtable-fc").remove();h.appendTo(m);return h};a.headerControls=function(g,h){var j=d('<div class="qtable-hc"><label>Rows:<select></select></label></div>');for(var f=0;f<h.length;f++){j.find("select").append('<option value="'+h[f]+'">'+h[f]+"</option>")}j.prependTo(g)};a.staticLoad=function(n,k,h,l,i){i=i||1;var m=((i-1)*l),j=(m+l),f=h.slice(m,j);a.body(k.find("table"),f,l,i);var g=Math.ceil(h.length/l);a.footerControls(k,g,i,n.pagination.pages);k.off("click","li:not(.active) a").on("click","li:not(.active) a",function(o){o.preventDefault();var p=parseInt(d(this).data("pg"));a.staticLoad(n,k,h,l,p)}).off("change",".qtable-hc select").on("change",".qtable-hc select",function(o){o.preventDefault();a.staticLoad(n,k,h,parseInt(d(this).val()))})};a.query=function(h,g,f,j,k){k=k||1;j=j||f.pagination.rows[0];var i=d.ajax(g,{cache:false,beforeSend:function(){h.find(".qtable-overlay").css({display:"flex"})},complete:function(){h.find(".qtable-overlay").css({display:"none"})},data:{start:((k-1)*j),length:j},dataType:"json",error:function(n,l,m){alert("Error encountered. Log this on https://github.com/angujo/qtable")},method:"get",success:function(m){var l=Math.ceil(m.rows/j);a.body(h.find("table"),m.data,j,k);a.footerControls(h,l,k,f.pagination.pages);h.off("click","li:not(.active) a").on("click","li:not(.active) a",function(n){n.preventDefault();k=parseInt(d(this).data("pg"));a.query(h,g,f,j,k)}).off("change",".qtable-hc select").on("change",".qtable-hc select",function(n){n.preventDefault();a.query(h,g,f,parseInt(d(this).val()))})}})};a.dynamic=function(h,g,f){h.prepend('<div class="qtable-overlay"><span>Loading Data...</span></div>');a.query(h,g,f)};a.init=function(j,f){var g=d('<div class="q-tabulated"></div>'),h=j.clone(true),i=a.tableData(h);h.appendTo(g);a.headerControls(g,f.pagination.rows);if(h.data("fetch")){a.dynamic(g,h.data("fetch"),f)}else{a.staticLoad(f,g,i,f.pagination.rows[0])}g.insertAfter(j);j.remove()};d.fn.qtable=function(f){f=d.extend(e,f,{});this.filter("table").each(function(){a.init(d(this),f)});return this}})(jQuery,Window,Document);